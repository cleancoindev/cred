# Gitcoin Cred Instance

This repository is a SourceCred instance with the Gitcoin plugin enabled by default.

# Setup and Usage

Get [Yarn] and then run `yarn` to install SourceCred and dependencies.

Then, run the following commands to update the instance:

- `yarn load` loads the cache.
- `yarn graph` regenerates plugin graphs from the cache;
  these graphs get saved in `output/`.
- `yarn score` computes Cred scores, combining data from all the chosen
  plugins
- `yarn grain` distributes Grain according to the current Cred scores, and the config in `config/grain.json`
- `yarn site` generates frontend
- `yarn serve` runs the frontend

# About SourceCred Instances

- `config/grain.json` specifies how much Grain to distribute every week. The `maxSimultaneousDistributions` parameter 
determines how many weeks of "back-distributions" to generate if the command hasn't been run in a while (or ever).
- `config/plugins/$PLUGIN_OWNER/$PLUGIN_NAME` stores plugin-specific data. Each
  plugin has its own directory. See the plugin section below to learn how to configure them.
- `data/ledger.json` keeps a history of all grain distributions and transfers as well as identities added / merged.
- `output/` stores output data generated by SourceCred, including the Cred
  Graph and Cred Scores. This directory should be checked into Git; when
  needed, it may be removed and re-generated by SourceCred.
- `site/` which stores the compiled SourceCred frontend, which can display data
  stored in the instance.

### Distributing Grain

The amount of grain to get distributed every week can be defined in the `config/grain.json` file.
There are two different policies that can be used to control how the grain gets distributed: 
- `immediatePerWeek` splits the grain evenly based on everyone's Cred in the last week only.
- `balancedPerWeek` distributes the grain consistently based on total lifetime cred scores. i.e. it balances
the distribution of grain with the distribution of total historical cred.

The balanced policy allows Gitcoin to reward people retro-actively. e.g. If someone has been historically "overpaid"
with grain relative to their cred scores, that people will receive less grain in the balanced distribution while people
who have been "underpaid" relative to their cred will receive more grain.

In Gitcoin, we distribute 15000 grain / week with the "balanced" policy and 5000 grain / week with the "immediate"
policy. The values you use for your community depend on whether you want to optimize for more immediate short term
action, or for long term incentive alignment, but we recommend using a blend of both.

